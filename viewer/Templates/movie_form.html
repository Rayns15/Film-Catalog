{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Movie Submission Form</title>
    
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        :root {
            --bg1: #1a0b30; /* Darker Purple/Blue */
            --bg2: #2a1240; /* Lighter Purple/Blue */
            --card-bg: rgba(255, 255, 255, 0.08);
            --stroke: rgba(255, 255, 255, 0.25);
            --text: #ffffff;
            --muted: rgba(255,255,255,0.75);
            --accent-save: #6ee7ff; /* Blue for Save */
            --accent-cancel: #ff6e6e; /* Red for Cancel */
            --accent-2: #a78bfa; /* Purple accent */
            --shadow: rgba(0,0,0,0.35);
        }

        html, body {
            min-height: 100vh; /* MODIFIED: Use min-height */
        }
        *,
        *::before,
        *::after {
            box-sizing: border-box;
        }
        
/* ADD THIS NEW RULE */
        body {
            margin: 0;
            font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", sans-serif;
            color: var(--text);
            background-color: #0b1020;
            background-image: linear-gradient(135deg, var(--bg1) 0%, var(--bg2) 100%);
            padding-bottom: 40px; /* Adds spacing at the bottom */
        }

        .wrap {
            width: min(92vw, 500px);
            margin: 40px auto; /* This adds 40px top/bottom and centers it left/right */
        }

        .card {
            background: linear-gradient(180deg, rgba(255,255,255,0.10), rgba(255,255,255,0.06));
            backdrop-filter: blur(10px);
            border: 1px solid var(--stroke);
            border-radius: 16px;
            padding: 28px 24px;
            box-shadow: 0 10px 30px var(--shadow), inset 0 0 0 1px rgba(255,255,255,0.05);
        }

        .title {
            margin: 0 0 18px;
            font-size: 1.5rem;
            font-weight: 700;
            letter-spacing: .3px;
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--text);
        }

        .title .dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, var(--accent-save), var(--accent-2));
            box-shadow: 0 0 18px var(--accent-2);
        }

        /* --- Form Styling --- */
        form {
            display: grid;
            gap: 14px;
        }
        form p {
            margin: 0;
            display: grid;
            gap: 5px;
        }
        form label {
            font-size: .9rem;
            color: var(--muted);
            padding-left: 14px;
            display: block;
        }
        form input, 
        form select,
        form textarea {
            width: 100%;
            padding: 12px 14px;
            border-radius: 10px;
            border: 1px solid var(--stroke);
            background: rgba(13, 18, 38, 0.35);
            color: var(--text);
            outline: none;
            font-size: 15px;
            height: 44px;
            transition: border-color .15s ease, box-shadow .15s ease, background .15s ease;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
        }
        form textarea {
            height: auto;
            min-height: 100px;
            padding-top: 10px;
            padding-bottom: 10px;
        }
        form select {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='%23a78bfa'%3E%3Cpath fill-rule='evenodd' d='M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.25 4.25a.75.75 0 01-1.06 0L5.21 8.27a.75.75 0 01.02-1.06z' clip-rule='evenodd' /%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 14px center;
            background-size: 1em;
            padding-right: 30px;
        }
        form input:focus, 
        form select:focus,
        form textarea:focus {
            border-color: var(--accent-2);
            box-shadow: 0 0 0 4px rgba(167, 139, 250, 0.25);
            background: rgba(13, 18, 38, 0.5);
        }
        .errorlist {
            list-style: none;
            margin: 0;
            padding: 5px 14px 0 14px;
            font-size: .85rem;
            color: var(--accent-cancel);
        }
        
        /* --- Button Group and Styles --- */
        .actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            margin-top: 10px;
        }
        button[type="submit"],
        .button-cancel {
            appearance: none;
            border: none;
            cursor: pointer;
            border-radius: 12px;
            padding: 12px 16px;
            font-weight: 700;
            text-decoration: none;
            text-align: center;
            transition: transform .06s ease, box-shadow .15s ease, filter .15s ease;
            font-size: 1rem;
        }
        button[type="submit"] {
            color: #0b1020;
            background: linear-gradient(135deg, var(--accent-save), var(--accent-2));
            box-shadow: 0 8px 20px rgba(167, 139, 250, 0.35);
        }
        button[type="submit"]:hover {
            filter: brightness(1.03);
            box-shadow: 0 10px 26px rgba(167, 139, 250, 0.45);
        }
        button[type="submit"]:active {
            transform: translateY(1px);
        }
        .button-cancel {
            color: var(--text);
            background: rgba(255, 72, 72, 0.15);
            border: 1px solid var(--accent-cancel);
            box-shadow: 0 4px 10px rgba(255, 72, 72, 0.15);
        }
        .button-cancel:hover {
            background: rgba(255, 72, 72, 0.25);
            box-shadow: 0 6px 14px rgba(255, 72, 72, 0.25);
        }
        .button-cancel:active {
            transform: translateY(1px);
        }


        /* --- ADDED: Styles for the new header --- */
        .app-header {
            background: linear-gradient(135deg, rgba(124, 58, 237, 0.35), rgba(34, 211, 238, 0.35)) !important;
            position: relative;
            top: 0;
            z-index: 50;
            backdrop-filter: blur(6px);
            -webkit-backdrop-filter: blur(6px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            padding: 8px 0;
            color: #ffffff;
        }
        /* Scoped container class for the header */
        .app-header .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 12px 16px;
            display: flex;
            align-items: center;
            gap: 10px;
            text-decoration: none;
            font-weight: 800;
            letter-spacing: 0.3px;
        }
        .brand {
             display: inline-block;
             width: 40px; 
             height: 40px;
             /* You must add your logo background image here */
             /* background: url('{% static "img/logo.svg" %}') no-repeat center/cover; */
             background-color: rgba(255,255,255,0.1); /* Placeholder */
             border-radius: 50%;
        }
        .brand-badge {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            background: linear-gradient(135deg, #7c3aed, #22d3ee);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            font-size: 14px;
        }
        .tagline {
            font-size: 1rem;
            opacity: 0.8;
        }
        /* This targets .actions in the header, not the form */
        .app-header .actions {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .btn {
            appearance: none;
            border: 0;
            border-radius: 9999px;
            padding: 8px 14px;
            font-weight: 600;
            cursor: pointer;
            text-decoration: none;
            line-height: 1;
            /* From your inline styles */
            min-width: 130px; 
            font-size: 1.05rem;
        }
        .btn-login {
            background: transparent;
            color: #ffffff;
            border: 1px solid rgba(255, 255, 255, 0.35);
        }
        .btn-login:hover {
            border-color: #ffffff;
            background: rgba(255, 255, 255, 0.06);
        }
        .btn-signup {
            background: #8b5cf6;
            color: #ffffff;
            box-shadow: 0 6px 18px rgba(139, 92, 246, 0.4);
        }
        .btn-signup:hover {
            background: #7c3aed;
        }
        /* --- End of added header styles --- */

    </style>
</head>
<body>
    <body>
    <header class="app-header col-span-full" role="banner">
        <div class="container flex flex-col md:flex-row items-center justify-between">
            
            <div class="flex items-center gap-2 mb-2 md:mb-0">
                <a class="brand" href="http://127.0.0.1:8000/home/" aria-label="Film Catalog home"></a>
                <span class="brand-badge" aria-hidden="true">FC</span>
                <span class="font-bold text-lg">Film Catalog</span>
                <span class="tagline hidden sm:inline-block text-white/90 ml-2">Python Development</span>
            </div>
            
            <div class="flex-1"></div>
            <nav class="actions flex gap-4 mt-2 md:mt-0 justify-end" aria-label="User account actions">
                {% if user.is_authenticated %}
                    <a class="btn btn-login" href="{% url 'admin:index' %}" style="padding:12px 24px;">My account</a>
                    <form action="{% url 'logout' %}" method="post" style="display:inline;">
                        {% csrf_token %}
                        <input type="hidden" name="next" value="{% url 'home' %}">
                        <button type="submit" class="btn btn-signup" style="padding:12px 24px;">Log out</button>
                    </form>
                {% else %}
                    <a class="btn btn-login" href="{% url 'login' %}" style="padding:12px 24px;">Log in</a>
                    <a class="btn btn-signup" href="{% url 'signup' %}" style="padding:12px 24px;">Sign up</a>
                {% endif %}
                <a class="btn btn-login" href="http://127.0.0.1:8000/aboutme/" style="padding:12px 24px;">About Me</a>
                <a class="btn btn-login" href="/contact/" style="padding:12px 24px;">Contact</a>
                {% if request.path == '/search/' or request.path|slice:":8" == '/search/' %}
                    <a class="btn btn-login bg-indigo-500 hover:bg-indigo-700 text-white" href="{% url 'home' %}" style="padding:12px 24px;">Exit Search</a>
                {% endif %}
            </nav>
            </div>
    </header>
    <div class="wrap">
        <div class="card">
            <h1 class="title"><span class="dot" aria-hidden="true"></span>Movie Submission Form 🎬</h1>
            
            <form method="post" enctype="multipart/form-data">
                {% csrf_token %}
                <script>
                    document.addEventListener('DOMContentLoaded', function() {
                        function smoothTransitionAndRedirect(url) {
                            document.body.style.transition = 'opacity 0.5s';
                            document.body.style.opacity = '0';
                            setTimeout(() => {
                                window.location.href = url;
                            }, 500);
                        }

                        // --- Original Cancel Button Script ---
                        const cancelBtn = document.querySelector('.button-cancel');
                        if (cancelBtn) {
                            cancelBtn.addEventListener('click', function(e) {
                                e.preventDefault();
                                smoothTransitionAndRedirect(cancelBtn.href);
                            });
                        }

                        // --- Original Form Submit Script ---
                        const form = document.querySelector('form');
                        if (form) {
                            form.addEventListener('submit', function(e) {
                                // Don't apply transition to the logout form (handled below)
                                if (form.closest('.app-header')) return; 

                                if (form.checkValidity()) {
                                    e.preventDefault();
                                    document.body.style.transition = 'opacity 0.5s';
                                    document.body.style.opacity = '0';
                                    setTimeout(() => {
                                        form.submit();
                                    }, 500);
                                }
                            });
                        }

                        // --- ADDED: JS for new header links ---
                        const headerLinks = document.querySelectorAll('.app-header a');
                        headerLinks.forEach(link => {
                            link.addEventListener('click', function(e) {
                                e.preventDefault();
                                smoothTransitionAndRedirect(link.href);
                            });
                        });

                        // --- ADDED: JS for new header logout form ---
                        const logoutForm = document.querySelector('.app-header form[action*="logout"]');
                        if (logoutForm) {
                            logoutForm.addEventListener('submit', function(e) {
                                e.preventDefault();
                                document.body.style.transition = 'opacity 0.5s';
                                document.body.style.opacity = '0';
                                setTimeout(() => {
                                    logoutForm.submit();
                                }, 500);
                            });
                        }
                    });
                </script>
                
                {{ form.as_p }}

                <p>
                    <label for="genre">Genre:</label>
                    <select name="genre" id="genre" required>
                        <option value="" disabled selected>Select a genre</option>
                        <option value="Action">Action</option>
                        <option value="Drama">Drama</option>
                        <option value="Sci-Fi">Sci-Fi</option>
                        <option value="Comedy">Comedy</option>
                        <option value="Thriller">Thriller</option>
                        <option value="Horror">Horror</option>
                    </select>
                </p>
                <div class="actions">
                    <a href="http://127.0.0.1:8000/home/" class="button-cancel">Cancel</a>
                    <button type="submit">Save Movie</button>
                </div>
            </form>
        </div>
    </div>
</body>
</html>
{% load static %}